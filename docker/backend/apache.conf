<Directory /var/www/html/public>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted

    # Habilitar cabeceras para CORS si el middleware de Laravel no llega a tiempo
    <IfModule mod_rewrite.c>
        RewriteEngine On

        # Manejar el Preflight (peticiones OPTIONS) de forma manual si es necesario
        RewriteCond %{REQUEST_METHOD} OPTIONS
        RewriteRule ^(.*)$ $1 [R=200,L]

        # Redirigir todo a index.php excepto archivos existentes
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^ index.php [QSA,L]
    </IfModule>
</Directory>

